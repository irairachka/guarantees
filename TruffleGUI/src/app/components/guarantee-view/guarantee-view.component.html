<div class="ui-layout-column" [ngClass]="user !== undefined ? user : ''">
  <header class="view-header text-center ui-space-tb-large">
    <label>
      ----------- {{user}} -----------
    </label>
    <div class="header-text ui-layout ui-space-t-medium" ui-layout-align="space-around center">
      <label>דשבורד ערבויות</label>
      <button *ngIf="user==='user'"  (click)="openModal()">בקשה חדשה</button>
    </div>
  </header>
  <main>
    <div class="requests-section" *ngIf="user !== 'beneficiary'">
      <div *ngIf="allRequests"  class="for-treatment ui-space-tb-large">
        <div class="section-header ui-space-tb-small text-bold">
          <label>
            לטיפול כרגע (שלי) - {{numForTreatment}} ערבויות
          </label>
        </div>
        <div class="req-for-treatment" *ngFor="let req of allRequests | filterByKeyValue:'RequestState':0">
          <request-item [request]="req" (emitRequest)="openModal($event)">
            <request-details [request]="req"></request-details>
          </request-item>
        </div>
      </div>

      <div class="pending">
        <div *ngIf="allRequests"  class="section-header ui-space-tb-small text-bold">
          <label>
            בהמתנה - (לטיפול הבנק)
          </label>
        </div>
        <div class="req-pending" *ngFor="let req of allRequests | filterByKeyValue:'RequestState':1">
          <request-item [request]="req" (emitRequest)="openModal($event)">
            <label>מתאריך {{req.StartDate   }}</label>
          </request-item>
        </div>
      </div>

      <div class="guarantees">
        <div class="section-header ui-space-tb-small text-bold">
          <label>
            היסטורית ערבויות
          </label>
        </div>
        <div class="curr-guarantees" *ngFor="let req of allGuarantees">
          <request-item [request]="req" (emitRequest)="openModal($event)">
          </request-item>
        </div>
      </div>
    </div>

    <div class="guarantees-section" *ngIf="user === 'beneficiary'">
      <div class="active ui-space-tb-large">
        <div class="section-header ui-space-tb-small text-bold">
          <label>
            ערבויות פעילות
          </label>
        </div>
        <div class="active-guarantees" *ngFor="let req of allGuarantees | filterByKeyValue:'status':0">
          <request-item [request]="req" (emitRequest)="openModal($event)">
            <request-details [request]="req"></request-details>
          </request-item>
        </div>
      </div>

      <div class="inactive ui-space-tb-large">
        <div class="section-header ui-space-tb-small text-bold">
          <label>
            ערבויות לא פעילות
          </label>
        </div>
        <div class="inactive-guarantees" *ngFor="let req of allGuarantees | filterByKeyValue:'status':1">
          <request-item [request]="req" (emitRequest)="openModal($event)">
            <request-details [request]="req"></request-details>
          </request-item>
        </div>
      </div>
    </div>


  </main>
</div>
